<!-- NewPage -->   
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<!-- Generated by javadoc (1.8.0) on Tue Mar 04 03:13:27 PST 2014 --> 
<title>java.lang.instrument (Java Platform SE 8 )</title> 
<meta name="date" content="2014-03-04"> 
<meta name="keywords" content="java.lang.instrument package"> 
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style"> 
<script type="text/javascript" src="../../../script.js"></script> 
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="java.lang.instrument (Java Platform SE 8 )";
        }
    }
    catch(err) {
    }
//-->
</script> 
<noscript>
  &lt;div&gt; JavaScript is disabled on your browser. 
</noscript> 
<!-- ========= START OF TOP NAVBAR ======= -->   
<div class="topNav"> 
 <a name="navbar.top"> 
  <!--   --> </a> 
 <div class="skipNav"> 
  <a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a> 
 </div> 
 <a name="navbar.top.firstrow"> 
  <!--   --> </a> 
 <ul class="navList" title="Navigation"> 
  <li><a href="../../../overview-summary.html">概述</a></li> 
  <li class="navBarCell1Rev">软件包</li> 
  <li>类</li> 
  <li><a href="package-use.html">使用</a></li> 
  <li><a href="package-tree.html">树</a></li> 
  <li><a href="../../../deprecated-list.html">已过时的</a></li> 
  <li><a href="../../../index-files/index-1.html">索引</a></li> 
  <li><a href="../../../help-doc.html">帮助</a></li> 
 </ul> 
 <div class="aboutLanguage"> 
  <strong>Java™&nbsp;Platform<br>Standard&nbsp;Ed.&nbsp;8</strong> 
 </div> 
</div> 
<div class="subNav"> 
 <ul class="navList"> 
  <li><a href="../../../java/lang/annotation/package-summary.html">Prev&nbsp;Package</a></li> 
  <li><a href="../../../java/lang/invoke/package-summary.html">Next&nbsp;Package</a></li> 
 </ul> 
 <ul class="navList"> 
  <li><a href="../../../index.html?java/lang/instrument/package-summary.html" target="_top">框架</a></li> 
  <li><a href="package-summary.html" target="_top">无框架</a></li> 
 </ul> 
 <ul class="navList" id="allclasses_navbar_top"> 
  <li><a href="../../../allclasses-noframe.html">所有类</a></li> 
 </ul> 
 <div> 
  <script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script> 
 </div> 
 <a name="skip.navbar.top"> 
  <!--   --> </a> 
</div> 
<!-- ========= END OF TOP NAVBAR ========= --> 
<div class="header"> 
 <h1 title="Package" class="title">Package&nbsp;java.lang.instrument</h1> 
 <div class="docSummary"> 
  <div class="block" data-fanyi="1">
    提供的服务允许java编程语言的代理工具运行在JVM上的程序。 
  </div> 
 </div> 
 <p>See:&nbsp;<a href="#package.description">描述</a></p> 
</div> 
<div class="contentContainer"> 
 <ul class="blockList"> 
  <li class="blockList"> 
   <table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Interface Summary table, listing interfaces, and an explanation"> 
    <caption> 
     <span>接口摘要</span> 
     <span class="tabEnd">&nbsp;</span> 
    </caption> 
    <tbody> 
     <tr> 
      <th class="colFirst" scope="col">接口</th> 
      <th class="colLast" scope="col">描述</th> 
     </tr> 
    </tbody> 
    <tbody> 
     <tr class="altColor"> 
      <td class="colFirst"><a href="../../../java/lang/instrument/ClassFileTransformer.html" title="interface in java.lang.instrument">ClassFileTransformer</a></td> 
      <td class="colLast"> 
       <div class="block" data-fanyi="1">
         代理提供此接口的实现，以转换类文件。 
       </div> </td> 
     </tr> 
     <tr class="rowColor"> 
      <td class="colFirst"><a href="../../../java/lang/instrument/Instrumentation.html" title="interface in java.lang.instrument">Instrumentation</a></td> 
      <td class="colLast"> 
       <div class="block" data-fanyi="1">
         这个类提供了所需的工具java编程语言代码服务。 
       </div> </td> 
     </tr> 
    </tbody> 
   </table> </li> 
  <li class="blockList"> 
   <table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Class Summary table, listing classes, and an explanation"> 
    <caption> 
     <span>类摘要</span> 
     <span class="tabEnd">&nbsp;</span> 
    </caption> 
    <tbody> 
     <tr> 
      <th class="colFirst" scope="col">类</th> 
      <th class="colLast" scope="col">描述</th> 
     </tr> 
    </tbody> 
    <tbody> 
     <tr class="altColor"> 
      <td class="colFirst"><a href="../../../java/lang/instrument/ClassDefinition.html" title="class in java.lang.instrument">ClassDefinition</a></td> 
      <td class="colLast"> 
       <div class="block" data-fanyi="1">
         这类作为一个参数块的 
        <code>Instrumentation.redefineClasses</code>方法。 
       </div> </td> 
     </tr> 
    </tbody> 
   </table> </li> 
  <li class="blockList"> 
   <table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Exception Summary table, listing exceptions, and an explanation"> 
    <caption> 
     <span>异常摘要</span> 
     <span class="tabEnd">&nbsp;</span> 
    </caption> 
    <tbody> 
     <tr> 
      <th class="colFirst" scope="col">异常</th> 
      <th class="colLast" scope="col">描述</th> 
     </tr> 
    </tbody> 
    <tbody> 
     <tr class="altColor"> 
      <td class="colFirst"><a href="../../../java/lang/instrument/IllegalClassFormatException.html" title="class in java.lang.instrument">IllegalClassFormatException</a></td> 
      <td class="colLast"> 
       <div class="block" data-fanyi="1">
         扔的 
        <a href="../../../java/lang/instrument/ClassFileTransformer.html#transform-java.lang.ClassLoader-java.lang.String-java.lang.Class-java.security.ProtectionDomain-byte:A-"><code>ClassFileTransformer.transform</code></a>实现当输入参数无效。 
       </div> </td> 
     </tr> 
     <tr class="rowColor"> 
      <td class="colFirst"><a href="../../../java/lang/instrument/UnmodifiableClassException.html" title="class in java.lang.instrument">UnmodifiableClassException</a></td> 
      <td class="colLast"> 
       <div class="block" data-fanyi="1">
         扔的 
        <a href="../../../java/lang/instrument/Instrumentation.html#redefineClasses-java.lang.instrument.ClassDefinition...-"><code>Instrumentation.redefineClasses</code></a>实现当一个指定的类不能被修改。 
       </div> </td> 
     </tr> 
    </tbody> 
   </table> </li> 
 </ul> 
 <a name="package.description"> 
  <!--   --> </a> 
 <h2 title="Package java.lang.instrument Description">Package java.lang.instrument Description</h2> 
 <div class="block" data-fanyi="1">
   提供的服务允许java编程语言的代理工具运行在JVM上的程序。仪器的机制是修改的字节码的方法。 
  <h2 data-fanyi="1">包装规格</h2> 
  <p data-fanyi="1">一个代理被部署为一个文件。在“罐子”文件清单中的一个属性指定将被加载到启动代理的代理类。对于支持命令行界面的实现，通过在命令行上指定一个选项来启动代理程序。实现也可以支持一个机制，开始代理一些时间后，虚拟机已经开始。例如，一个实现可能提供了一种机制，允许一个工具零贴上到运行的应用程序，并启动该工具的代理加载到运行的应用程序。有关如何启动负载的详细信息，是依赖于实现的。</p> 
  <h3 data-fanyi="1">命令行界面</h3> 
  <p data-fanyi="1">不需要一个实现，以提供一种从命令行界面开始代理的方法。在提供了从命令行界面开始代理的方法的实现中，一个代理是通过将此选项添加到命令行启动的开始的：</p> 
  <blockquote> 
   <code><b>-javaagent:</b></code> 
   <i>jarpath[</i> 
   <code><b>=</b></code> 
   <i>options]</i> 
  </blockquote> nulljarpath是代理JAR文件的路径。空选项是代理人的选择。此开关可以在同一个命令行上多次使用，从而创建多个代理。多个代理可以使用相同的nulljarpath。一个代理的“文件”文件必须符合“文件规范”的文件规范。 
  <p data-fanyi="1">代理人的JAR文件的清单必须包含属性<code>Premain-Class</code>。此属性的值是零代理类名称。代理类必须实现原理上类似于<code>main</code>程序入口点<code>premain</code>公共静态方法。java虚拟机（JVM）初始化后，每个<code>premain</code>方法将顺序指定代理商，那么真正的应用<code>main</code>方法会被调用。每个<code>premain</code>方法必须返回为了启动顺序进行。</p> 
  <p data-fanyi="1"><code>premain</code>的方法有两种可能的签名。JVM首先尝试调用代理类的方法如下：</p> 
  <blockquote> 
   <code>public static void premain(String agentArgs, Instrumentation inst); </code> 
  </blockquote> 
  <p data-fanyi="1">如果代理类不实现这个方法，那么JVM将尝试调用：</p> 
  <blockquote> 
   <code>public static void premain(String agentArgs); </code> 
  </blockquote> 
  <p data-fanyi="1">代理类会使用<code>agentmain</code>方法当代理在虚拟机启动开始。当代理开始使用命令行选项的<code>agentmain</code>方法不会被调用。</p> 
  <p data-fanyi="1">代理类将被系统类加载器加载（见<a href="../../../java/lang/ClassLoader.html#getSystemClassLoader--"><code>ClassLoader.getSystemClassLoader</code></a>）。这是类加载器通常负载包含应用程序<code>main</code>方法的类。的<code>premain</code>方法将运行在相同的安全和运行规则的应用<code>main</code>方法。没有限制的代理<code>premain</code>建模方法可以做什么。任何应用<code>main</code>可以做，包括创建线程，是法律从<code>premain</code>。</p> 
  <p data-fanyi="1">各代理商通过其代理人通过<code>agentArgs</code>参数选项。代理选项作为一个单一的字符串传递，任何附加的分析都应该由代理本身执行。</p> 
  <p data-fanyi="1">如果代理人不能得到解决（例如，因为代理类不能被加载，或因为代理类没有一个合适的<code>premain</code>法），JVM将中止。如果一个<code>premain</code>方法抛出未捕获的异常，JVM将中止。</p> 
  <h3 data-fanyi="1">启动虚拟机启动后的启动代理</h3> 
  <p data-fanyi="1">一个实现可能会提供一个机制来启动代理的某个时候，虚拟机已经开始。细节如何这是启动实施特定的通常的应用已经起步，<code> main</code>方法已经被调用。在实现支持启动虚拟机启动代理的情况下，已经开始以下应用：</p> 
  <ol data-fanyi="1"> 
   <li data-fanyi="1"><p data-fanyi="1">代理人的JAR清单必须包含属性<code>Agent-Class</code>。此属性的值是零代理类名称。</p></li> 
   <li data-fanyi="1"><p data-fanyi="1">代理类必须实现一个公共静态<code>agentmain</code>方法。</p></li> 
   <li data-fanyi="1"><p data-fanyi="1">系统类加载器（<a href="../../../java/lang/ClassLoader.html#getSystemClassLoader--"><code>ClassLoader.getSystemClassLoader</code></a>）必须支持一种机制来添加一个代理JAR文件到系统类路径。</p><p data-fanyi="1"></p></li> 
  </ol> 
  <p data-fanyi="1">将代理罐附加到系统类路径上。这是类装载器，通常加载包含应用程序<code>main</code>方法的类。代理类装入JVM试图调用<code>agentmain</code>方法。JVM首先尝试调用代理类的方法如下：</p> 
  <blockquote> 
   <code>public static void agentmain(String agentArgs, Instrumentation inst); </code> 
  </blockquote> 
  <p data-fanyi="1">如果代理类不实现这个方法，那么JVM将尝试调用：</p> 
  <blockquote> 
   <code>public static void agentmain(String agentArgs); </code> 
  </blockquote> 
  <p data-fanyi="1">代理类会使用<code>premain</code>方法当代理开始使用命令行选项。当代理的虚拟机启动的<code>premain</code>方法不会被调用后开始。</p> 
  <p data-fanyi="1">代理通过其代理人通过<code>agentArgs</code>参数选项。代理选项作为一个单一的字符串传递，任何附加的分析都应该由代理本身执行。</p> 
  <p data-fanyi="1">的<code>agentmain</code>方法应该需要启动代理的任何必要的初始化。当启动完成时该方法应该返回。如果代理人不能启动（例如，因为代理类不能被加载，或因为代理类没有一致性<code>agentmain</code>法），JVM不会中止。如果<code>agentmain</code>方法抛出未捕获的异常会被忽略。</p>z-73ec1c17-25dd-43f8—94dc-6b60994e5eca以下清单属性为代理JAR文件定义： 
  <blockquote> 
   <dl> 
    <dt> 
     <code>Premain-Class</code> 
    </dt> 
    <dd>
      When an agent is specified at JVM launch time this attribute specifies the agent class. That is, the class containing the 
     <code>premain</code> method. When an agent is specified at JVM launch time this attribute is required. If the attribute is not present the JVM will abort. Note: this is a class name, not a file name or path. 
    </dd> 
    <dt> 
     <code>Agent-Class</code> 
    </dt> 
    <dd>
      If an implementation supports a mechanism to start agents sometime after the VM has started then this attribute specifies the agent class. That is, the class containing the 
     <code>agentmain</code> method. This attribute is required, if it is not present the agent will not be started. Note: this is a class name, not a file name or path. 
    </dd> 
    <dt> 
     <code>Boot-Class-Path</code> 
    </dt> 
    <dd>
      A list of paths to be searched by the bootstrap class loader. Paths represent directories or libraries (commonly referred to as JAR or zip libraries on many platforms). These paths are searched by the bootstrap class loader after the platform specific mechanisms of locating a class have failed. Paths are searched in the order listed. Paths in the list are separated by one or more spaces. A path takes the syntax of the path component of a hierarchical URI. The path is absolute if it begins with a slash character ('/'), otherwise it is relative. A relative path is resolved against the absolute path of the agent JAR file. Malformed and non-existent paths are ignored. When an agent is started sometime after the VM has started then paths that do not represent a JAR file are ignored. This attribute is optional. 
    </dd> 
    <dt> 
     <code>Can-Redefine-Classes</code> 
    </dt> 
    <dd>
      Boolean ( 
     <code>true</code> or 
     <code>false</code>, case irrelevant). Is the ability to redefine classes needed by this agent. Values other than 
     <code>true</code> are considered 
     <code>false</code>. This attribute is optional, the default is 
     <code>false</code>. 
    </dd> 
    <dt> 
     <code>Can-Retransform-Classes</code> 
    </dt> 
    <dd>
      Boolean ( 
     <code>true</code> or 
     <code>false</code>, case irrelevant). Is the ability to retransform classes needed by this agent. Values other than 
     <code>true</code> are considered 
     <code>false</code>. This attribute is optional, the default is 
     <code>false</code>. 
    </dd> 
    <dt> 
     <code>Can-Set-Native-Method-Prefix</code> 
    </dt> 
    <dd>
      Boolean ( 
     <code>true</code> or 
     <code>false</code>, case irrelevant). Is the ability to set native method prefix needed by this agent. Values other than 
     <code>true</code> are considered 
     <code>false</code>. This attribute is optional, the default is 
     <code>false</code>. 
    </dd> 
   </dl> 
  </blockquote> 
  <p data-fanyi="1">代理JAR文件既有可能<code>Premain-Class</code>和<code>Agent-Class</code>属性出现在清单。当代理开始在命令行使用<code>-javaagent</code>选项然后<code>Premain-Class</code>属性指定的代理类和<code>Agent-Class</code>属性的名称被忽略。同样，如果代理一段时间后，虚拟机已经开始启动，然后<code>Agent-Class</code>属性指定代理类的名字（的<code>Premain-Class</code>属性的值被忽略）。</p> 
  <h2 data-fanyi="1">相关文件</h2>工具文档，请参阅： 
  <ul data-fanyi="1"> 
   <li data-fanyi="1"><a href="../../../../technotes/tools/index.html">JDK Tools and Utilities</a></li> 
  </ul> 
 </div> 
 <dl> 
  <dt> 
   <span class="simpleTagLabel">从以下版本开始：</span> 
  </dt> 
  <dd>
    JDK1.5 
  </dd> 
 </dl> 
</div> 
<!-- ======= START OF BOTTOM NAVBAR ====== --> 
<div class="bottomNav"> 
 <a name="navbar.bottom"> 
  <!--   --> </a> 
 <div class="skipNav"> 
  <a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a> 
 </div> 
 <a name="navbar.bottom.firstrow"> 
  <!--   --> </a> 
 <ul class="navList" title="Navigation"> 
  <li><a href="../../../overview-summary.html">概述</a></li> 
  <li class="navBarCell1Rev">软件包</li> 
  <li>类</li> 
  <li><a href="package-use.html">使用</a></li> 
  <li><a href="package-tree.html">树</a></li> 
  <li><a href="../../../deprecated-list.html">已过时的</a></li> 
  <li><a href="../../../index-files/index-1.html">索引</a></li> 
  <li><a href="../../../help-doc.html">帮助</a></li> 
 </ul> 
 <div class="aboutLanguage"> 
  <strong>Java™&nbsp;Platform<br>Standard&nbsp;Ed.&nbsp;8</strong> 
 </div> 
</div> 
<div class="subNav"> 
 <ul class="navList"> 
  <li><a href="../../../java/lang/annotation/package-summary.html">Prev&nbsp;Package</a></li> 
  <li><a href="../../../java/lang/invoke/package-summary.html">Next&nbsp;Package</a></li> 
 </ul> 
 <ul class="navList"> 
  <li><a href="../../../index.html?java/lang/instrument/package-summary.html" target="_top">框架</a></li> 
  <li><a href="package-summary.html" target="_top">无框架</a></li> 
 </ul> 
 <ul class="navList" id="allclasses_navbar_bottom"> 
  <li><a href="../../../allclasses-noframe.html">所有类</a></li> 
 </ul> 
 <div> 
  <script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script> 
 </div> 
 <a name="skip.navbar.bottom"> 
  <!--   --> </a> 
</div> 
<!-- ======== END OF BOTTOM NAVBAR ======= --> 
<p class="legalCopy"><small><font size="-1"> <a href="http://bugreport.sun.com/bugreport/">Submit a bug or feature</a> <br>For further API reference and developer documentation, see <a href="http://download.oracle.com/javase/8/docs/index.html" target="_blank">Java SE Documentation</a>. That documentation contains more detailed, developer-targeted descriptions, with conceptual overviews, definitions of terms, workarounds, and working code examples.<br> Copyright © 1993, 2014, Oracle and/or its affiliates. All rights reserved. </font></small> </p> 
<div id="adDiv"> 


 <div></div> 
</div> 
<p></p>